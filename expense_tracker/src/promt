—Ç–æ —Ç–∏ —Ç–æ—á–µ–Ω –∏ —è—Å–µ–Ω –ø—Ä–æ–º–ø—Ç –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏, —Å—Ç—ä–ø–∫–∞ –ø–æ —Å—Ç—ä–ø–∫–∞, –∑–∞ –¥–∞ –æ–ø—Ä–∞–≤–∏—à –≥—Ä–µ—à–∫–∞—Ç–∞ —Å Liquibase:

‚ö†Ô∏è –ì—Ä–µ—à–∫–∞—Ç–∞:
text
Copy
Edit
liquibase.exception.DatabaseException: Table 'expense_tracker_test.budgets' doesn't exist
[Failed SQL: (1146) ALTER TABLE expense_tracker_test.budgets MODIFY `limit` DECIMAL(19, 2)]
üß© –ü—Ä–∏—á–∏–Ω–∞:
Liquibase —Å–µ –æ–ø–∏—Ç–≤–∞ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏ –∫–æ–ª–æ–Ω–∞—Ç–∞ limit –≤ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ budgets, –ø—Ä–µ–¥–∏ —Å–∞–º–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ –¥–∞ –µ —Å—ä–∑–¥–∞–¥–µ–Ω–∞. –¢–æ–≤–∞ —Å—Ç–∞–≤–∞ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ.

‚úÖ –†–µ—à–µ–Ω–∏–µ ‚Äì —Å—Ç—ä–ø–∫–∞ –ø–æ —Å—Ç—ä–ø–∫–∞:
1. –û—Ç–≤–æ—Ä–∏ master changelog —Ñ–∞–π–ª–∞:
–û–±–∏–∫–Ω–æ–≤–µ–Ω–æ —Å–µ –∫–∞–∑–≤–∞:

bash
Copy
Edit
db/changelog/db.changelog-master.xml
2. –ü—Ä–æ–≤–µ—Ä–∏ –ø–æ–¥—Ä–µ–¥–±–∞—Ç–∞ –Ω–∞ include-–∏—Ç–µ:
–£–≤–µ—Ä–∏ —Å–µ, —á–µ:

xml
Copy
Edit
<include file="db/changelog/v1.0/010-create-budgets-table.xml"/>
–µ –ø—Ä–µ–¥–∏:

xml
Copy
Edit
<include file="db/changelog/v1.0/020-update-budget-scale-to-2.xml"/>
‚ùó –ê–∫–æ –Ω–µ –µ –≤ —Ç–æ–∑–∏ —Ä–µ–¥ ‚Äì —Å–º–µ–Ω–∏ –≥–∏.

3. –î–æ–±–∞–≤–∏ preConditions –≤ 020-—Ñ–∞–π–ª–∞:
–û—Ç–≤–æ—Ä–∏:

pgsql
Copy
Edit
db/changelog/v1.0/020-update-budget-scale-to-2.xml
–∏ –≥–æ –Ω–∞–ø—Ä–∞–≤–∏ —Ç–∞–∫–∞:

xml
Copy
Edit
<changeSet id="v1.0-020" author="Angel">
    <preConditions onFail="MARK_RAN">
        <tableExists tableName="budgets"/>
    </preConditions>
    <modifyDataType
        tableName="budgets"
        columnName="limit"
        newDataType="DECIMAL(19, 2)"/>
</changeSet>
–¢–æ–≤–∞ —â–µ –Ω–∞–∫–∞—Ä–∞ Liquibase –¥–∞ –ø—Ä–æ–ø—É—Å–Ω–µ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ, –∞–∫–æ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞.

4. –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤–∞—Ç–∞ –±–∞–∑–∞ –∏–º–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
–ò–∑–ø–æ–ª–∑–≤–∞—à –ª–∏ spring.jpa.hibernate.ddl-auto=create –∏–ª–∏ create-drop?

–ê–∫–æ –Ω–µ, Liquibase —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–≤–∞ –≤—Å–∏—á–∫–æ (–≤–∫–ª. budgets).

–£–≤–µ—Ä–∏ —Å–µ, —á–µ –≤ test –ø—Ä–æ—Ñ–∏–ª–∞/application-test.yml –∏–ª–∏ .properties —Ç–æ–≤–∞ –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–æ.

–ü—Ä–µ–ø–æ—Ä—ä–∫–∞:
–í —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ —á–µ—Å—Ç–æ –µ –ø–æ-–¥–æ–±—Ä–µ:

–∏–ª–∏ –¥–∞ –Ω–µ –ø–æ–ª–∑–≤–∞—à Liquibase, –∞ ddl-auto=create-drop –∏ schema.sql

–∏–ª–∏ –¥–∞ —Ä–∞–∑—á–∏—Ç–∞—à –∏–∑—Ü—è–ª–æ –Ω–∞ Liquibase, –Ω–æ —Å –ø—Ä–∞–≤–∏–ª–µ–Ω —Ä–µ–¥ –∏ preConditions

–ê–∫–æ –∏—Å–∫–∞—à, –ø—Ä–∞—Ç–∏ –º–∏ master changelog-–∞ –∏ —â–µ —Ç–∏ –∫–∞–∂–∞ —Ç–æ—á–Ω–æ –∫–∞–∫ –¥–∞ –≥–æ –ø—Ä–µ–Ω–∞—Ä–µ–¥–∏—à.